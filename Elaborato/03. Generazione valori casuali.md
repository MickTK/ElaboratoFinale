\nuovocapitolo{3. Generazione valori casuali}

# 3. Generazione valori casuali
La casualità nel mondo della crittografia gioca un ruolo fondamentale. Un numero casuale viene generato tramite RNG (Random Number Generator) per essere utilizzato successivamente come chiave o come vettore iniziale.

La libreria *PyCryptoDome* ci propone il package *Crypto.Random* per la generazione di valori (pseudo)casuali. Il package fornisce il metodo *get_random_bytes(N)* per la generazione di una stringa di byte di lunghezza N.

Il modulo *random* del package ci offre invece le seguenti operazioni per la generazione o scelta di un valore (pseudo)casuale:

- *random.getrandbits(N)*: genera un intero di lunghezza N bit
- *random.randrange([start, ]stop[, step])*: genera un intero compreso nel range definito sull'insieme dei valori ottenibili partendo dal valore start e arrivando al valore stop con passo step
- *random.randint(a, b)*: genera un intero nel range a-b (a incluso, b escluso)
- *random.choice(seq)*: sceglie un elemento casuale presente nella data sequenza seq
- *random.shuffle(seq)*: mischia e restituisce la sequenza seq passata come parametro
- *random.sample(population, k)*: sceglie e restituisce casualmente k elementi presenti nella lista population

Come si può leggere dalla documentazione del package, *Crypto.Random* genera dei valori casuali utilizzando (tramite chiamate di sistema) funzioni e metodi implementati dal sistema operativo sul quale viene eseguito il programma (*“Random numbers get sourced directly from the OS”*). In parole povere il package di *PyCryptoDome* non è nient'altro che un wrapper del metodo *os.urandom*, offrendoci una serie di funzioni già implementate e pronte all'uso.

Per svolgere operazioni di questo tipo viene comunemente consigliato l'utilizzo del modulo built-in *secrets* di Python, che svolge le medesime funzioni del package *Crypto.Random* seppur con un numero di metodi pre-implementati inferiore. Il modulo in questione è a sua volta un wrapper del metodo *os.urandom*.

Su Github possiamo trovare le implementazioni dei due moduli: [*Crypto.Random.random*](https://github.com/Legrandin/pycryptodome/blob/master/lib/Crypto/Random/random.py) e [*secrets*](https://github.com/python/cpython/blob/3.8/Lib/secrets.py).

Vediamo un esempio di utilizzo degli algoritmi per la generazione casuale di una stringa di byte:

```python
from Crypto import Random
import secrets, os
LENGTH = 16
token = os.urandom(LENGTH)
print('os:          ', token)
token = secrets.token_bytes(LENGTH)
print('secrets:     ', token)
token = Random.get_random_bytes(LENGTH)
print('PyCryptoDome:', token)
```

Risultati:

```
>> os:           b'sM\xca\x9dh{\xa6\x1f\xb1\xee\xfc\xd5\xed7&`'
>> secrets:      b'\x9e\x7f\xa9\xffOa\xee#\xadv\xf3\xa1\x1b\xb0pq'
>> PyCryptoDome: b'\x91n\xbe1\xf9\xd7k\x8b\x13\x19\x8b\xa7~8!L'
```

\nuovapaginasinistravuota
